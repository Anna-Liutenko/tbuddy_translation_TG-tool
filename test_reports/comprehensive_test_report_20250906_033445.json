{
  "execution_summary": {
    "overall_success": false,
    "total_tests": 12,
    "total_passed": 8,
    "total_failed": 4,
    "overall_success_rate": 0.6666666666666666,
    "validation_compliant": false,
    "suite_results": [
      {
        "suite": "group_chat_functionality_tests",
        "tests_run": 12,
        "passed": 8,
        "failed": 4,
        "success_rate": 0.6666666666666666
      }
    ],
    "recommendations": [
      "Overall success rate is 0.0%, aim for 95%+",
      "Address validation compliance issues",
      "Optimize group_chat_functionality_tests performance (avg: 34.96s)"
    ]
  },
  "test_results": {
    "comprehensive_unit_tests": null,
    "group_chat_functionality_tests": {
      "success": false,
      "tests_run": 12,
      "failures": 4,
      "errors": 0,
      "skipped": 0,
      "success_rate": 0.6666666666666666,
      "detailed_failures": [
        {
          "test": "test_configuration_validation (tests.test_group_chat_functionality.TestGroupChatMessageHandling.test_configuration_validation) (env_value='true')",
          "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 331, in test_configuration_validation\n    mock_start_conv.assert_called_once()\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\mock.py\", line 918, in assert_called_once\n    raise AssertionError(msg)\nAssertionError: Expected 'start_direct_line_conversation' to have been called once. Called 2 times.\nCalls: [call(), call()].\n\nStderr:\n--- Logging error ---\nTraceback (most recent call last):\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\logging\\__init__.py\", line 1113, in emit\n    stream.write(msg + self.terminator)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\encodings\\cp1252.py\", line 19, in encode\n    return codecs.charmap_encode(input,self.errors,encoding_table)[0]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nUnicodeEncodeError: 'charmap' codec can't encode characters in position 42-47: character maps to <undefined>\nCall stack:\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 696, in <module>\n    main()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 670, in main\n    results = test_runner.run_all_tests(test_suite_filter)\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 125, in run_all_tests\n    suite_result = suite_function()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 229, in _run_group_chat_tests\n    success, unittest_result = run_group_chat_functionality_tests()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 494, in run_group_chat_functionality_tests\n    result = runner.run(suite)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\runner.py\", line 217, in run\n    test(result)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\suite.py\", line 84, in __call__\n    return self.run(*args, **kwds)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\suite.py\", line 122, in run\n    test(result)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 678, in __call__\n    return self.run(*args, **kwds)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 623, in run\n    self._callTestMethod(testMethod)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 579, in _callTestMethod\n    if method() is not None:\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 324, in test_configuration_validation\n    response = self.app_context.post('/webhook',\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1167, in post\n    return self.open(*args, **kw)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\testing.py\", line 235, in open\n    response = super().open(\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1116, in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 988, in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1264, in run_wsgi_app\n    app_rv = app(environ, start_response)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 1536, in __call__\n    return self.wsgi_app(environ, start_response)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\app.py\", line 594, in telegram_webhook\n    activity_id = send_message_to_copilot(conv_id, token, text, from_id=user_from_id)\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\app.py\", line 366, in send_message_to_copilot\n    app.logger.warning(\"Ошибка отправки сообщения: %s %s\", response.status_code, (response.text or '')[:200])\nMessage: 'Ошибка отправки сообщения: %s %s'\nArguments: (403, '{\\r\\n  \"error\": {\\r\\n    \"code\": \"BadArgument\",\\r\\n    \"message\": \"Invalid token or secret\"\\r\\n  }\\r\\n}')\n--- Logging error ---\nTraceback (most recent call last):\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\logging\\__init__.py\", line 1113, in emit\n    stream.write(msg + self.terminator)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\encodings\\cp1252.py\", line 19, in encode\n    return codecs.charmap_encode(input,self.errors,encoding_table)[0]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nUnicodeEncodeError: 'charmap' codec can't encode characters in position 42-43: character maps to <undefined>\nCall stack:\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 696, in <module>\n    main()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 670, in main\n    results = test_runner.run_all_tests(test_suite_filter)\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 125, in run_all_tests\n    suite_result = suite_function()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 229, in _run_group_chat_tests\n    success, unittest_result = run_group_chat_functionality_tests()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 494, in run_group_chat_functionality_tests\n    result = runner.run(suite)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\runner.py\", line 217, in run\n    test(result)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\suite.py\", line 84, in __call__\n    return self.run(*args, **kwds)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\suite.py\", line 122, in run\n    test(result)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 678, in __call__\n    return self.run(*args, **kwds)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 623, in run\n    self._callTestMethod(testMethod)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 579, in _callTestMethod\n    if method() is not None:\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 324, in test_configuration_validation\n    response = self.app_context.post('/webhook',\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1167, in post\n    return self.open(*args, **kw)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\testing.py\", line 235, in open\n    response = super().open(\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1116, in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 988, in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1264, in run_wsgi_app\n    app_rv = app(environ, start_response)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 1536, in __call__\n    return self.wsgi_app(environ, start_response)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\app.py\", line 598, in telegram_webhook\n    app.logger.warning(\"Не удалось отправить сообщение для чата %s. Предполагаем, что токен истек, начинаем новый разговор.\", chat_id)\nMessage: 'Не удалось отправить сообщение для чата %s. Предполагаем, что токен истек, начинаем новый разговор.'\nArguments: (-12345,)\n--- Logging error ---\nTraceback (most recent call last):\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\logging\\__init__.py\", line 1113, in emit\n    stream.write(msg + self.terminator)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\encodings\\cp1252.py\", line 19, in encode\n    return codecs.charmap_encode(input,self.errors,encoding_table)[0]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nUnicodeEncodeError: 'charmap' codec can't encode characters in position 42-47: character maps to <undefined>\nCall stack:\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 696, in <module>\n    main()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 670, in main\n    results = test_runner.run_all_tests(test_suite_filter)\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 125, in run_all_tests\n    suite_result = suite_function()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 229, in _run_group_chat_tests\n    success, unittest_result = run_group_chat_functionality_tests()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 494, in run_group_chat_functionality_tests\n    result = runner.run(suite)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\runner.py\", line 217, in run\n    test(result)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\suite.py\", line 84, in __call__\n    return self.run(*args, **kwds)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\suite.py\", line 122, in run\n    test(result)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 678, in __call__\n    return self.run(*args, **kwds)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 623, in run\n    self._callTestMethod(testMethod)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 579, in _callTestMethod\n    if method() is not None:\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 324, in test_configuration_validation\n    response = self.app_context.post('/webhook',\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1167, in post\n    return self.open(*args, **kw)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\testing.py\", line 235, in open\n    response = super().open(\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1116, in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 988, in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1264, in run_wsgi_app\n    app_rv = app(environ, start_response)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 1536, in __call__\n    return self.wsgi_app(environ, start_response)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\app.py\", line 631, in telegram_webhook\n    activity_id = send_message_to_copilot(conv_id, token, text, from_id=user_from_id)\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\app.py\", line 366, in send_message_to_copilot\n    app.logger.warning(\"Ошибка отправки сообщения: %s %s\", response.status_code, (response.text or '')[:200])\nMessage: 'Ошибка отправки сообщения: %s %s'\nArguments: (403, '{\\r\\n  \"error\": {\\r\\n    \"code\": \"BadArgument\",\\r\\n    \"message\": \"Invalid token or secret\"\\r\\n  }\\r\\n}')\n"
        },
        {
          "test": "test_group_chat_conversation_isolation (tests.test_group_chat_functionality.TestGroupChatMessageHandling.test_group_chat_conversation_isolation)",
          "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 204, in test_group_chat_conversation_isolation\n    self.assertEqual(response1.status_code, 200)\nAssertionError: 500 != 200\n\nStderr:\n--- Logging error ---\nTraceback (most recent call last):\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\logging\\__init__.py\", line 1113, in emit\n    stream.write(msg + self.terminator)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\encodings\\cp1252.py\", line 19, in encode\n    return codecs.charmap_encode(input,self.errors,encoding_table)[0]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nUnicodeEncodeError: 'charmap' codec can't encode characters in position 39-46: character maps to <undefined>\nCall stack:\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 696, in <module>\n    main()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 670, in main\n    results = test_runner.run_all_tests(test_suite_filter)\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 125, in run_all_tests\n    suite_result = suite_function()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 229, in _run_group_chat_tests\n    success, unittest_result = run_group_chat_functionality_tests()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 494, in run_group_chat_functionality_tests\n    result = runner.run(suite)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\runner.py\", line 217, in run\n    test(result)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\suite.py\", line 84, in __call__\n    return self.run(*args, **kwds)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\suite.py\", line 122, in run\n    test(result)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 678, in __call__\n    return self.run(*args, **kwds)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 623, in run\n    self._callTestMethod(testMethod)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 579, in _callTestMethod\n    if method() is not None:\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 195, in test_group_chat_conversation_isolation\n    response1 = self.app_context.post('/webhook',\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1167, in post\n    return self.open(*args, **kw)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\testing.py\", line 235, in open\n    response = super().open(\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1116, in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 988, in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1264, in run_wsgi_app\n    app_rv = app(environ, start_response)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 1536, in __call__\n    return self.wsgi_app(environ, start_response)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\app.py\", line 665, in telegram_webhook\n    app.logger.info(\"Получено %d немедленных ответов от бота для чата %s.\", len(bot_responses), chat_id)\nMessage: 'Получено %d немедленных ответов от бота для чата %s.'\nArguments: (1, -12345)\n--- Logging error ---\nTraceback (most recent call last):\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\logging\\__init__.py\", line 1113, in emit\n    stream.write(msg + self.terminator)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\encodings\\cp1252.py\", line 19, in encode\n    return codecs.charmap_encode(input,self.errors,encoding_table)[0]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nUnicodeEncodeError: 'charmap' codec can't encode characters in position 39-46: character maps to <undefined>\nCall stack:\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 696, in <module>\n    main()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 670, in main\n    results = test_runner.run_all_tests(test_suite_filter)\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 125, in run_all_tests\n    suite_result = suite_function()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 229, in _run_group_chat_tests\n    success, unittest_result = run_group_chat_functionality_tests()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 494, in run_group_chat_functionality_tests\n    result = runner.run(suite)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\runner.py\", line 217, in run\n    test(result)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\suite.py\", line 84, in __call__\n    return self.run(*args, **kwds)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\suite.py\", line 122, in run\n    test(result)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 678, in __call__\n    return self.run(*args, **kwds)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 623, in run\n    self._callTestMethod(testMethod)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 579, in _callTestMethod\n    if method() is not None:\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 200, in test_group_chat_conversation_isolation\n    response2 = self.app_context.post('/webhook',\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1167, in post\n    return self.open(*args, **kw)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\testing.py\", line 235, in open\n    response = super().open(\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1116, in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 988, in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1264, in run_wsgi_app\n    app_rv = app(environ, start_response)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 1536, in __call__\n    return self.wsgi_app(environ, start_response)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\app.py\", line 665, in telegram_webhook\n    app.logger.info(\"Получено %d немедленных ответов от бота для чата %s.\", len(bot_responses), chat_id)\nMessage: 'Получено %d немедленных ответов от бота для чата %s.'\nArguments: (1, 54321)\n"
        },
        {
          "test": "test_group_chat_processing_enabled_by_default (tests.test_group_chat_functionality.TestGroupChatMessageHandling.test_group_chat_processing_enabled_by_default)",
          "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 74, in test_group_chat_processing_enabled_by_default\n    self.assertEqual(response.status_code, 200)\nAssertionError: 500 != 200\n\nStderr:\n--- Logging error ---\nTraceback (most recent call last):\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\logging\\__init__.py\", line 1113, in emit\n    stream.write(msg + self.terminator)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\encodings\\cp1252.py\", line 19, in encode\n    return codecs.charmap_encode(input,self.errors,encoding_table)[0]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nUnicodeEncodeError: 'charmap' codec can't encode characters in position 39-46: character maps to <undefined>\nCall stack:\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 696, in <module>\n    main()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 670, in main\n    results = test_runner.run_all_tests(test_suite_filter)\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 125, in run_all_tests\n    suite_result = suite_function()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 229, in _run_group_chat_tests\n    success, unittest_result = run_group_chat_functionality_tests()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 494, in run_group_chat_functionality_tests\n    result = runner.run(suite)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\runner.py\", line 217, in run\n    test(result)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\suite.py\", line 84, in __call__\n    return self.run(*args, **kwds)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\suite.py\", line 122, in run\n    test(result)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 678, in __call__\n    return self.run(*args, **kwds)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 623, in run\n    self._callTestMethod(testMethod)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 579, in _callTestMethod\n    if method() is not None:\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 70, in test_group_chat_processing_enabled_by_default\n    response = self.app_context.post('/webhook',\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1167, in post\n    return self.open(*args, **kw)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\testing.py\", line 235, in open\n    response = super().open(\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1116, in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 988, in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1264, in run_wsgi_app\n    app_rv = app(environ, start_response)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 1536, in __call__\n    return self.wsgi_app(environ, start_response)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\app.py\", line 665, in telegram_webhook\n    app.logger.info(\"Получено %d немедленных ответов от бота для чата %s.\", len(bot_responses), chat_id)\nMessage: 'Получено %d немедленных ответов от бота для чата %s.'\nArguments: (1, -12345)\n"
        },
        {
          "test": "test_regression_private_chat_still_works (tests.test_group_chat_functionality.TestGroupChatMessageHandling.test_regression_private_chat_still_works)",
          "traceback": "Traceback (most recent call last):\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 294, in test_regression_private_chat_still_works\n    self.assertEqual(response.status_code, 200)\nAssertionError: 500 != 200\n\nStderr:\n--- Logging error ---\nTraceback (most recent call last):\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\logging\\__init__.py\", line 1113, in emit\n    stream.write(msg + self.terminator)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\encodings\\cp1252.py\", line 19, in encode\n    return codecs.charmap_encode(input,self.errors,encoding_table)[0]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nUnicodeEncodeError: 'charmap' codec can't encode characters in position 39-46: character maps to <undefined>\nCall stack:\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 696, in <module>\n    main()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 670, in main\n    results = test_runner.run_all_tests(test_suite_filter)\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 125, in run_all_tests\n    suite_result = suite_function()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 229, in _run_group_chat_tests\n    success, unittest_result = run_group_chat_functionality_tests()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 494, in run_group_chat_functionality_tests\n    result = runner.run(suite)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\runner.py\", line 217, in run\n    test(result)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\suite.py\", line 84, in __call__\n    return self.run(*args, **kwds)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\suite.py\", line 122, in run\n    test(result)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 678, in __call__\n    return self.run(*args, **kwds)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 623, in run\n    self._callTestMethod(testMethod)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 579, in _callTestMethod\n    if method() is not None:\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 290, in test_regression_private_chat_still_works\n    response = self.app_context.post('/webhook',\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1167, in post\n    return self.open(*args, **kw)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\testing.py\", line 235, in open\n    response = super().open(\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1116, in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 988, in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1264, in run_wsgi_app\n    app_rv = app(environ, start_response)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 1536, in __call__\n    return self.wsgi_app(environ, start_response)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\app.py\", line 665, in telegram_webhook\n    app.logger.info(\"Получено %d немедленных ответов от бота для чата %s.\", len(bot_responses), chat_id)\nMessage: 'Получено %d немедленных ответов от бота для чата %s.'\nArguments: (1, 54321)\n"
        }
      ],
      "detailed_errors": [],
      "output": "================================================================================\nGROUP CHAT FUNCTIONALITY TESTS - TELEGRAM TRANSLATION BOT\n================================================================================\ntest_configuration_validation (tests.test_group_chat_functionality.TestGroupChatMessageHandling.test_configuration_validation)\nTest that configuration values are properly validated ... \n  test_configuration_validation (tests.test_group_chat_functionality.TestGroupChatMessageHandling.test_configuration_validation) (env_value='true')\nTest that configuration values are properly validated ... FAIL\ntest_group_chat_commands_always_processed (tests.test_group_chat_functionality.TestGroupChatMessageHandling.test_group_chat_commands_always_processed)\nTest that commands are always processed in group chats regardless of setting ... ok\ntest_group_chat_conversation_isolation (tests.test_group_chat_functionality.TestGroupChatMessageHandling.test_group_chat_conversation_isolation)\nTest that group chats have isolated conversations from private chats ... FAIL\ntest_group_chat_error_messages_in_english (tests.test_group_chat_functionality.TestGroupChatMessageHandling.test_group_chat_error_messages_in_english)\nTest that error messages in group chats are displayed in English ... ok\ntest_group_chat_multiple_users (tests.test_group_chat_functionality.TestGroupChatMessageHandling.test_group_chat_multiple_users)\nTest handling of messages from multiple users in the same group ... ok\ntest_group_chat_processing_can_be_disabled (tests.test_group_chat_functionality.TestGroupChatMessageHandling.test_group_chat_processing_can_be_disabled)\nTest that group chat processing can be disabled via environment variable ... ok\ntest_group_chat_processing_enabled_by_default (tests.test_group_chat_functionality.TestGroupChatMessageHandling.test_group_chat_processing_enabled_by_default)\nTest that group chat processing is enabled by default ... FAIL\ntest_group_chat_typing_indicator (tests.test_group_chat_functionality.TestGroupChatMessageHandling.test_group_chat_typing_indicator)\nTest that typing indicators are sent for group chat messages ... ok\ntest_regression_private_chat_still_works (tests.test_group_chat_functionality.TestGroupChatMessageHandling.test_regression_private_chat_still_works)\nTest that private chat functionality is not affected by group chat changes ... FAIL\ntest_supergroup_chat_processing (tests.test_group_chat_functionality.TestGroupChatMessageHandling.test_supergroup_chat_processing)\nTest that supergroup chats are handled the same as regular groups ... ok\ntest_group_chat_disabled_logged (tests.test_group_chat_functionality.TestGroupChatLogging.test_group_chat_disabled_logged)\nTest that disabled group chat processing is properly logged ... ok\ntest_group_chat_processing_logged (tests.test_group_chat_functionality.TestGroupChatLogging.test_group_chat_processing_logged)\nTest that group chat processing decisions are properly logged ... ok\n\n======================================================================\nFAIL: test_configuration_validation (tests.test_group_chat_functionality.TestGroupChatMessageHandling.test_configuration_validation) (env_value='true')\nTest that configuration values are properly validated\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 331, in test_configuration_validation\n    mock_start_conv.assert_called_once()\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\mock.py\", line 918, in assert_called_once\n    raise AssertionError(msg)\nAssertionError: Expected 'start_direct_line_conversation' to have been called once. Called 2 times.\nCalls: [call(), call()].\n\nStderr:\n--- Logging error ---\nTraceback (most recent call last):\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\logging\\__init__.py\", line 1113, in emit\n    stream.write(msg + self.terminator)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\encodings\\cp1252.py\", line 19, in encode\n    return codecs.charmap_encode(input,self.errors,encoding_table)[0]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nUnicodeEncodeError: 'charmap' codec can't encode characters in position 42-47: character maps to <undefined>\nCall stack:\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 696, in <module>\n    main()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 670, in main\n    results = test_runner.run_all_tests(test_suite_filter)\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 125, in run_all_tests\n    suite_result = suite_function()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 229, in _run_group_chat_tests\n    success, unittest_result = run_group_chat_functionality_tests()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 494, in run_group_chat_functionality_tests\n    result = runner.run(suite)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\runner.py\", line 217, in run\n    test(result)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\suite.py\", line 84, in __call__\n    return self.run(*args, **kwds)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\suite.py\", line 122, in run\n    test(result)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 678, in __call__\n    return self.run(*args, **kwds)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 623, in run\n    self._callTestMethod(testMethod)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 579, in _callTestMethod\n    if method() is not None:\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 324, in test_configuration_validation\n    response = self.app_context.post('/webhook',\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1167, in post\n    return self.open(*args, **kw)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\testing.py\", line 235, in open\n    response = super().open(\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1116, in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 988, in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1264, in run_wsgi_app\n    app_rv = app(environ, start_response)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 1536, in __call__\n    return self.wsgi_app(environ, start_response)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\app.py\", line 594, in telegram_webhook\n    activity_id = send_message_to_copilot(conv_id, token, text, from_id=user_from_id)\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\app.py\", line 366, in send_message_to_copilot\n    app.logger.warning(\"Ошибка отправки сообщения: %s %s\", response.status_code, (response.text or '')[:200])\nMessage: 'Ошибка отправки сообщения: %s %s'\nArguments: (403, '{\\r\\n  \"error\": {\\r\\n    \"code\": \"BadArgument\",\\r\\n    \"message\": \"Invalid token or secret\"\\r\\n  }\\r\\n}')\n--- Logging error ---\nTraceback (most recent call last):\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\logging\\__init__.py\", line 1113, in emit\n    stream.write(msg + self.terminator)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\encodings\\cp1252.py\", line 19, in encode\n    return codecs.charmap_encode(input,self.errors,encoding_table)[0]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nUnicodeEncodeError: 'charmap' codec can't encode characters in position 42-43: character maps to <undefined>\nCall stack:\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 696, in <module>\n    main()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 670, in main\n    results = test_runner.run_all_tests(test_suite_filter)\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 125, in run_all_tests\n    suite_result = suite_function()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 229, in _run_group_chat_tests\n    success, unittest_result = run_group_chat_functionality_tests()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 494, in run_group_chat_functionality_tests\n    result = runner.run(suite)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\runner.py\", line 217, in run\n    test(result)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\suite.py\", line 84, in __call__\n    return self.run(*args, **kwds)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\suite.py\", line 122, in run\n    test(result)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 678, in __call__\n    return self.run(*args, **kwds)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 623, in run\n    self._callTestMethod(testMethod)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 579, in _callTestMethod\n    if method() is not None:\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 324, in test_configuration_validation\n    response = self.app_context.post('/webhook',\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1167, in post\n    return self.open(*args, **kw)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\testing.py\", line 235, in open\n    response = super().open(\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1116, in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 988, in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1264, in run_wsgi_app\n    app_rv = app(environ, start_response)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 1536, in __call__\n    return self.wsgi_app(environ, start_response)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\app.py\", line 598, in telegram_webhook\n    app.logger.warning(\"Не удалось отправить сообщение для чата %s. Предполагаем, что токен истек, начинаем новый разговор.\", chat_id)\nMessage: 'Не удалось отправить сообщение для чата %s. Предполагаем, что токен истек, начинаем новый разговор.'\nArguments: (-12345,)\n--- Logging error ---\nTraceback (most recent call last):\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\logging\\__init__.py\", line 1113, in emit\n    stream.write(msg + self.terminator)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\encodings\\cp1252.py\", line 19, in encode\n    return codecs.charmap_encode(input,self.errors,encoding_table)[0]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nUnicodeEncodeError: 'charmap' codec can't encode characters in position 42-47: character maps to <undefined>\nCall stack:\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 696, in <module>\n    main()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 670, in main\n    results = test_runner.run_all_tests(test_suite_filter)\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 125, in run_all_tests\n    suite_result = suite_function()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 229, in _run_group_chat_tests\n    success, unittest_result = run_group_chat_functionality_tests()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 494, in run_group_chat_functionality_tests\n    result = runner.run(suite)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\runner.py\", line 217, in run\n    test(result)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\suite.py\", line 84, in __call__\n    return self.run(*args, **kwds)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\suite.py\", line 122, in run\n    test(result)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 678, in __call__\n    return self.run(*args, **kwds)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 623, in run\n    self._callTestMethod(testMethod)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 579, in _callTestMethod\n    if method() is not None:\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 324, in test_configuration_validation\n    response = self.app_context.post('/webhook',\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1167, in post\n    return self.open(*args, **kw)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\testing.py\", line 235, in open\n    response = super().open(\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1116, in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 988, in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1264, in run_wsgi_app\n    app_rv = app(environ, start_response)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 1536, in __call__\n    return self.wsgi_app(environ, start_response)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\app.py\", line 631, in telegram_webhook\n    activity_id = send_message_to_copilot(conv_id, token, text, from_id=user_from_id)\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\app.py\", line 366, in send_message_to_copilot\n    app.logger.warning(\"Ошибка отправки сообщения: %s %s\", response.status_code, (response.text or '')[:200])\nMessage: 'Ошибка отправки сообщения: %s %s'\nArguments: (403, '{\\r\\n  \"error\": {\\r\\n    \"code\": \"BadArgument\",\\r\\n    \"message\": \"Invalid token or secret\"\\r\\n  }\\r\\n}')\n\n======================================================================\nFAIL: test_group_chat_conversation_isolation (tests.test_group_chat_functionality.TestGroupChatMessageHandling.test_group_chat_conversation_isolation)\nTest that group chats have isolated conversations from private chats\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 204, in test_group_chat_conversation_isolation\n    self.assertEqual(response1.status_code, 200)\nAssertionError: 500 != 200\n\nStderr:\n--- Logging error ---\nTraceback (most recent call last):\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\logging\\__init__.py\", line 1113, in emit\n    stream.write(msg + self.terminator)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\encodings\\cp1252.py\", line 19, in encode\n    return codecs.charmap_encode(input,self.errors,encoding_table)[0]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nUnicodeEncodeError: 'charmap' codec can't encode characters in position 39-46: character maps to <undefined>\nCall stack:\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 696, in <module>\n    main()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 670, in main\n    results = test_runner.run_all_tests(test_suite_filter)\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 125, in run_all_tests\n    suite_result = suite_function()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 229, in _run_group_chat_tests\n    success, unittest_result = run_group_chat_functionality_tests()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 494, in run_group_chat_functionality_tests\n    result = runner.run(suite)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\runner.py\", line 217, in run\n    test(result)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\suite.py\", line 84, in __call__\n    return self.run(*args, **kwds)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\suite.py\", line 122, in run\n    test(result)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 678, in __call__\n    return self.run(*args, **kwds)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 623, in run\n    self._callTestMethod(testMethod)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 579, in _callTestMethod\n    if method() is not None:\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 195, in test_group_chat_conversation_isolation\n    response1 = self.app_context.post('/webhook',\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1167, in post\n    return self.open(*args, **kw)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\testing.py\", line 235, in open\n    response = super().open(\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1116, in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 988, in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1264, in run_wsgi_app\n    app_rv = app(environ, start_response)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 1536, in __call__\n    return self.wsgi_app(environ, start_response)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\app.py\", line 665, in telegram_webhook\n    app.logger.info(\"Получено %d немедленных ответов от бота для чата %s.\", len(bot_responses), chat_id)\nMessage: 'Получено %d немедленных ответов от бота для чата %s.'\nArguments: (1, -12345)\n--- Logging error ---\nTraceback (most recent call last):\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\logging\\__init__.py\", line 1113, in emit\n    stream.write(msg + self.terminator)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\encodings\\cp1252.py\", line 19, in encode\n    return codecs.charmap_encode(input,self.errors,encoding_table)[0]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nUnicodeEncodeError: 'charmap' codec can't encode characters in position 39-46: character maps to <undefined>\nCall stack:\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 696, in <module>\n    main()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 670, in main\n    results = test_runner.run_all_tests(test_suite_filter)\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 125, in run_all_tests\n    suite_result = suite_function()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 229, in _run_group_chat_tests\n    success, unittest_result = run_group_chat_functionality_tests()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 494, in run_group_chat_functionality_tests\n    result = runner.run(suite)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\runner.py\", line 217, in run\n    test(result)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\suite.py\", line 84, in __call__\n    return self.run(*args, **kwds)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\suite.py\", line 122, in run\n    test(result)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 678, in __call__\n    return self.run(*args, **kwds)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 623, in run\n    self._callTestMethod(testMethod)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 579, in _callTestMethod\n    if method() is not None:\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 200, in test_group_chat_conversation_isolation\n    response2 = self.app_context.post('/webhook',\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1167, in post\n    return self.open(*args, **kw)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\testing.py\", line 235, in open\n    response = super().open(\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1116, in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 988, in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1264, in run_wsgi_app\n    app_rv = app(environ, start_response)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 1536, in __call__\n    return self.wsgi_app(environ, start_response)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\app.py\", line 665, in telegram_webhook\n    app.logger.info(\"Получено %d немедленных ответов от бота для чата %s.\", len(bot_responses), chat_id)\nMessage: 'Получено %d немедленных ответов от бота для чата %s.'\nArguments: (1, 54321)\n\n======================================================================\nFAIL: test_group_chat_processing_enabled_by_default (tests.test_group_chat_functionality.TestGroupChatMessageHandling.test_group_chat_processing_enabled_by_default)\nTest that group chat processing is enabled by default\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 74, in test_group_chat_processing_enabled_by_default\n    self.assertEqual(response.status_code, 200)\nAssertionError: 500 != 200\n\nStderr:\n--- Logging error ---\nTraceback (most recent call last):\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\logging\\__init__.py\", line 1113, in emit\n    stream.write(msg + self.terminator)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\encodings\\cp1252.py\", line 19, in encode\n    return codecs.charmap_encode(input,self.errors,encoding_table)[0]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nUnicodeEncodeError: 'charmap' codec can't encode characters in position 39-46: character maps to <undefined>\nCall stack:\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 696, in <module>\n    main()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 670, in main\n    results = test_runner.run_all_tests(test_suite_filter)\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 125, in run_all_tests\n    suite_result = suite_function()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 229, in _run_group_chat_tests\n    success, unittest_result = run_group_chat_functionality_tests()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 494, in run_group_chat_functionality_tests\n    result = runner.run(suite)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\runner.py\", line 217, in run\n    test(result)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\suite.py\", line 84, in __call__\n    return self.run(*args, **kwds)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\suite.py\", line 122, in run\n    test(result)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 678, in __call__\n    return self.run(*args, **kwds)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 623, in run\n    self._callTestMethod(testMethod)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 579, in _callTestMethod\n    if method() is not None:\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 70, in test_group_chat_processing_enabled_by_default\n    response = self.app_context.post('/webhook',\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1167, in post\n    return self.open(*args, **kw)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\testing.py\", line 235, in open\n    response = super().open(\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1116, in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 988, in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1264, in run_wsgi_app\n    app_rv = app(environ, start_response)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 1536, in __call__\n    return self.wsgi_app(environ, start_response)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\app.py\", line 665, in telegram_webhook\n    app.logger.info(\"Получено %d немедленных ответов от бота для чата %s.\", len(bot_responses), chat_id)\nMessage: 'Получено %d немедленных ответов от бота для чата %s.'\nArguments: (1, -12345)\n\n======================================================================\nFAIL: test_regression_private_chat_still_works (tests.test_group_chat_functionality.TestGroupChatMessageHandling.test_regression_private_chat_still_works)\nTest that private chat functionality is not affected by group chat changes\n----------------------------------------------------------------------\nTraceback (most recent call last):\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 294, in test_regression_private_chat_still_works\n    self.assertEqual(response.status_code, 200)\nAssertionError: 500 != 200\n\nStderr:\n--- Logging error ---\nTraceback (most recent call last):\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\logging\\__init__.py\", line 1113, in emit\n    stream.write(msg + self.terminator)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\encodings\\cp1252.py\", line 19, in encode\n    return codecs.charmap_encode(input,self.errors,encoding_table)[0]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nUnicodeEncodeError: 'charmap' codec can't encode characters in position 39-46: character maps to <undefined>\nCall stack:\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 696, in <module>\n    main()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 670, in main\n    results = test_runner.run_all_tests(test_suite_filter)\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 125, in run_all_tests\n    suite_result = suite_function()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 229, in _run_group_chat_tests\n    success, unittest_result = run_group_chat_functionality_tests()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 494, in run_group_chat_functionality_tests\n    result = runner.run(suite)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\runner.py\", line 217, in run\n    test(result)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\suite.py\", line 84, in __call__\n    return self.run(*args, **kwds)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\suite.py\", line 122, in run\n    test(result)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 678, in __call__\n    return self.run(*args, **kwds)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 623, in run\n    self._callTestMethod(testMethod)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 579, in _callTestMethod\n    if method() is not None:\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 290, in test_regression_private_chat_still_works\n    response = self.app_context.post('/webhook',\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1167, in post\n    return self.open(*args, **kw)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\testing.py\", line 235, in open\n    response = super().open(\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1116, in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 988, in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1264, in run_wsgi_app\n    app_rv = app(environ, start_response)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 1536, in __call__\n    return self.wsgi_app(environ, start_response)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\app.py\", line 665, in telegram_webhook\n    app.logger.info(\"Получено %d немедленных ответов от бота для чата %s.\", len(bot_responses), chat_id)\nMessage: 'Получено %d немедленных ответов от бота для чата %s.'\nArguments: (1, 54321)\n\n----------------------------------------------------------------------\nRan 12 tests in 34.960s\n\nFAILED (failures=4)\n\n================================================================================\nGROUP CHAT FUNCTIONALITY TEST RESULTS\n================================================================================\nTests Run: 12\nFailures: 4\nErrors: 0\nSkipped: 0\nSuccess Rate: 66.7%\n\n======================================== FAILURES ========================================\n\nFAILED: test_configuration_validation (tests.test_group_chat_functionality.TestGroupChatMessageHandling.test_configuration_validation) (env_value='true')\n------------------------------------------------------------\nTraceback (most recent call last):\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 331, in test_configuration_validation\n    mock_start_conv.assert_called_once()\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\mock.py\", line 918, in assert_called_once\n    raise AssertionError(msg)\nAssertionError: Expected 'start_direct_line_conversation' to have been called once. Called 2 times.\nCalls: [call(), call()].\n\nStderr:\n--- Logging error ---\nTraceback (most recent call last):\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\logging\\__init__.py\", line 1113, in emit\n    stream.write(msg + self.terminator)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\encodings\\cp1252.py\", line 19, in encode\n    return codecs.charmap_encode(input,self.errors,encoding_table)[0]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nUnicodeEncodeError: 'charmap' codec can't encode characters in position 42-47: character maps to <undefined>\nCall stack:\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 696, in <module>\n    main()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 670, in main\n    results = test_runner.run_all_tests(test_suite_filter)\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 125, in run_all_tests\n    suite_result = suite_function()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 229, in _run_group_chat_tests\n    success, unittest_result = run_group_chat_functionality_tests()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 494, in run_group_chat_functionality_tests\n    result = runner.run(suite)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\runner.py\", line 217, in run\n    test(result)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\suite.py\", line 84, in __call__\n    return self.run(*args, **kwds)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\suite.py\", line 122, in run\n    test(result)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 678, in __call__\n    return self.run(*args, **kwds)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 623, in run\n    self._callTestMethod(testMethod)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 579, in _callTestMethod\n    if method() is not None:\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 324, in test_configuration_validation\n    response = self.app_context.post('/webhook',\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1167, in post\n    return self.open(*args, **kw)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\testing.py\", line 235, in open\n    response = super().open(\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1116, in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 988, in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1264, in run_wsgi_app\n    app_rv = app(environ, start_response)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 1536, in __call__\n    return self.wsgi_app(environ, start_response)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\app.py\", line 594, in telegram_webhook\n    activity_id = send_message_to_copilot(conv_id, token, text, from_id=user_from_id)\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\app.py\", line 366, in send_message_to_copilot\n    app.logger.warning(\"Ошибка отправки сообщения: %s %s\", response.status_code, (response.text or '')[:200])\nMessage: 'Ошибка отправки сообщения: %s %s'\nArguments: (403, '{\\r\\n  \"error\": {\\r\\n    \"code\": \"BadArgument\",\\r\\n    \"message\": \"Invalid token or secret\"\\r\\n  }\\r\\n}')\n--- Logging error ---\nTraceback (most recent call last):\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\logging\\__init__.py\", line 1113, in emit\n    stream.write(msg + self.terminator)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\encodings\\cp1252.py\", line 19, in encode\n    return codecs.charmap_encode(input,self.errors,encoding_table)[0]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nUnicodeEncodeError: 'charmap' codec can't encode characters in position 42-43: character maps to <undefined>\nCall stack:\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 696, in <module>\n    main()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 670, in main\n    results = test_runner.run_all_tests(test_suite_filter)\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 125, in run_all_tests\n    suite_result = suite_function()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 229, in _run_group_chat_tests\n    success, unittest_result = run_group_chat_functionality_tests()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 494, in run_group_chat_functionality_tests\n    result = runner.run(suite)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\runner.py\", line 217, in run\n    test(result)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\suite.py\", line 84, in __call__\n    return self.run(*args, **kwds)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\suite.py\", line 122, in run\n    test(result)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 678, in __call__\n    return self.run(*args, **kwds)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 623, in run\n    self._callTestMethod(testMethod)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 579, in _callTestMethod\n    if method() is not None:\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 324, in test_configuration_validation\n    response = self.app_context.post('/webhook',\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1167, in post\n    return self.open(*args, **kw)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\testing.py\", line 235, in open\n    response = super().open(\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1116, in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 988, in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1264, in run_wsgi_app\n    app_rv = app(environ, start_response)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 1536, in __call__\n    return self.wsgi_app(environ, start_response)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\app.py\", line 598, in telegram_webhook\n    app.logger.warning(\"Не удалось отправить сообщение для чата %s. Предполагаем, что токен истек, начинаем новый разговор.\", chat_id)\nMessage: 'Не удалось отправить сообщение для чата %s. Предполагаем, что токен истек, начинаем новый разговор.'\nArguments: (-12345,)\n--- Logging error ---\nTraceback (most recent call last):\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\logging\\__init__.py\", line 1113, in emit\n    stream.write(msg + self.terminator)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\encodings\\cp1252.py\", line 19, in encode\n    return codecs.charmap_encode(input,self.errors,encoding_table)[0]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nUnicodeEncodeError: 'charmap' codec can't encode characters in position 42-47: character maps to <undefined>\nCall stack:\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 696, in <module>\n    main()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 670, in main\n    results = test_runner.run_all_tests(test_suite_filter)\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 125, in run_all_tests\n    suite_result = suite_function()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 229, in _run_group_chat_tests\n    success, unittest_result = run_group_chat_functionality_tests()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 494, in run_group_chat_functionality_tests\n    result = runner.run(suite)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\runner.py\", line 217, in run\n    test(result)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\suite.py\", line 84, in __call__\n    return self.run(*args, **kwds)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\suite.py\", line 122, in run\n    test(result)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 678, in __call__\n    return self.run(*args, **kwds)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 623, in run\n    self._callTestMethod(testMethod)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 579, in _callTestMethod\n    if method() is not None:\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 324, in test_configuration_validation\n    response = self.app_context.post('/webhook',\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1167, in post\n    return self.open(*args, **kw)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\testing.py\", line 235, in open\n    response = super().open(\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1116, in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 988, in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1264, in run_wsgi_app\n    app_rv = app(environ, start_response)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 1536, in __call__\n    return self.wsgi_app(environ, start_response)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\app.py\", line 631, in telegram_webhook\n    activity_id = send_message_to_copilot(conv_id, token, text, from_id=user_from_id)\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\app.py\", line 366, in send_message_to_copilot\n    app.logger.warning(\"Ошибка отправки сообщения: %s %s\", response.status_code, (response.text or '')[:200])\nMessage: 'Ошибка отправки сообщения: %s %s'\nArguments: (403, '{\\r\\n  \"error\": {\\r\\n    \"code\": \"BadArgument\",\\r\\n    \"message\": \"Invalid token or secret\"\\r\\n  }\\r\\n}')\n\n\nFAILED: test_group_chat_conversation_isolation (tests.test_group_chat_functionality.TestGroupChatMessageHandling.test_group_chat_conversation_isolation)\n------------------------------------------------------------\nTraceback (most recent call last):\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 204, in test_group_chat_conversation_isolation\n    self.assertEqual(response1.status_code, 200)\nAssertionError: 500 != 200\n\nStderr:\n--- Logging error ---\nTraceback (most recent call last):\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\logging\\__init__.py\", line 1113, in emit\n    stream.write(msg + self.terminator)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\encodings\\cp1252.py\", line 19, in encode\n    return codecs.charmap_encode(input,self.errors,encoding_table)[0]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nUnicodeEncodeError: 'charmap' codec can't encode characters in position 39-46: character maps to <undefined>\nCall stack:\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 696, in <module>\n    main()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 670, in main\n    results = test_runner.run_all_tests(test_suite_filter)\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 125, in run_all_tests\n    suite_result = suite_function()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 229, in _run_group_chat_tests\n    success, unittest_result = run_group_chat_functionality_tests()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 494, in run_group_chat_functionality_tests\n    result = runner.run(suite)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\runner.py\", line 217, in run\n    test(result)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\suite.py\", line 84, in __call__\n    return self.run(*args, **kwds)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\suite.py\", line 122, in run\n    test(result)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 678, in __call__\n    return self.run(*args, **kwds)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 623, in run\n    self._callTestMethod(testMethod)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 579, in _callTestMethod\n    if method() is not None:\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 195, in test_group_chat_conversation_isolation\n    response1 = self.app_context.post('/webhook',\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1167, in post\n    return self.open(*args, **kw)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\testing.py\", line 235, in open\n    response = super().open(\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1116, in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 988, in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1264, in run_wsgi_app\n    app_rv = app(environ, start_response)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 1536, in __call__\n    return self.wsgi_app(environ, start_response)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\app.py\", line 665, in telegram_webhook\n    app.logger.info(\"Получено %d немедленных ответов от бота для чата %s.\", len(bot_responses), chat_id)\nMessage: 'Получено %d немедленных ответов от бота для чата %s.'\nArguments: (1, -12345)\n--- Logging error ---\nTraceback (most recent call last):\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\logging\\__init__.py\", line 1113, in emit\n    stream.write(msg + self.terminator)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\encodings\\cp1252.py\", line 19, in encode\n    return codecs.charmap_encode(input,self.errors,encoding_table)[0]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nUnicodeEncodeError: 'charmap' codec can't encode characters in position 39-46: character maps to <undefined>\nCall stack:\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 696, in <module>\n    main()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 670, in main\n    results = test_runner.run_all_tests(test_suite_filter)\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 125, in run_all_tests\n    suite_result = suite_function()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 229, in _run_group_chat_tests\n    success, unittest_result = run_group_chat_functionality_tests()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 494, in run_group_chat_functionality_tests\n    result = runner.run(suite)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\runner.py\", line 217, in run\n    test(result)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\suite.py\", line 84, in __call__\n    return self.run(*args, **kwds)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\suite.py\", line 122, in run\n    test(result)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 678, in __call__\n    return self.run(*args, **kwds)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 623, in run\n    self._callTestMethod(testMethod)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 579, in _callTestMethod\n    if method() is not None:\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 200, in test_group_chat_conversation_isolation\n    response2 = self.app_context.post('/webhook',\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1167, in post\n    return self.open(*args, **kw)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\testing.py\", line 235, in open\n    response = super().open(\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1116, in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 988, in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1264, in run_wsgi_app\n    app_rv = app(environ, start_response)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 1536, in __call__\n    return self.wsgi_app(environ, start_response)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\app.py\", line 665, in telegram_webhook\n    app.logger.info(\"Получено %d немедленных ответов от бота для чата %s.\", len(bot_responses), chat_id)\nMessage: 'Получено %d немедленных ответов от бота для чата %s.'\nArguments: (1, 54321)\n\n\nFAILED: test_group_chat_processing_enabled_by_default (tests.test_group_chat_functionality.TestGroupChatMessageHandling.test_group_chat_processing_enabled_by_default)\n------------------------------------------------------------\nTraceback (most recent call last):\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 74, in test_group_chat_processing_enabled_by_default\n    self.assertEqual(response.status_code, 200)\nAssertionError: 500 != 200\n\nStderr:\n--- Logging error ---\nTraceback (most recent call last):\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\logging\\__init__.py\", line 1113, in emit\n    stream.write(msg + self.terminator)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\encodings\\cp1252.py\", line 19, in encode\n    return codecs.charmap_encode(input,self.errors,encoding_table)[0]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nUnicodeEncodeError: 'charmap' codec can't encode characters in position 39-46: character maps to <undefined>\nCall stack:\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 696, in <module>\n    main()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 670, in main\n    results = test_runner.run_all_tests(test_suite_filter)\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 125, in run_all_tests\n    suite_result = suite_function()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 229, in _run_group_chat_tests\n    success, unittest_result = run_group_chat_functionality_tests()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 494, in run_group_chat_functionality_tests\n    result = runner.run(suite)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\runner.py\", line 217, in run\n    test(result)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\suite.py\", line 84, in __call__\n    return self.run(*args, **kwds)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\suite.py\", line 122, in run\n    test(result)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 678, in __call__\n    return self.run(*args, **kwds)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 623, in run\n    self._callTestMethod(testMethod)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 579, in _callTestMethod\n    if method() is not None:\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 70, in test_group_chat_processing_enabled_by_default\n    response = self.app_context.post('/webhook',\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1167, in post\n    return self.open(*args, **kw)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\testing.py\", line 235, in open\n    response = super().open(\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1116, in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 988, in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1264, in run_wsgi_app\n    app_rv = app(environ, start_response)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 1536, in __call__\n    return self.wsgi_app(environ, start_response)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\app.py\", line 665, in telegram_webhook\n    app.logger.info(\"Получено %d немедленных ответов от бота для чата %s.\", len(bot_responses), chat_id)\nMessage: 'Получено %d немедленных ответов от бота для чата %s.'\nArguments: (1, -12345)\n\n\nFAILED: test_regression_private_chat_still_works (tests.test_group_chat_functionality.TestGroupChatMessageHandling.test_regression_private_chat_still_works)\n------------------------------------------------------------\nTraceback (most recent call last):\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 294, in test_regression_private_chat_still_works\n    self.assertEqual(response.status_code, 200)\nAssertionError: 500 != 200\n\nStderr:\n--- Logging error ---\nTraceback (most recent call last):\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\logging\\__init__.py\", line 1113, in emit\n    stream.write(msg + self.terminator)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\encodings\\cp1252.py\", line 19, in encode\n    return codecs.charmap_encode(input,self.errors,encoding_table)[0]\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nUnicodeEncodeError: 'charmap' codec can't encode characters in position 39-46: character maps to <undefined>\nCall stack:\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 696, in <module>\n    main()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 670, in main\n    results = test_runner.run_all_tests(test_suite_filter)\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 125, in run_all_tests\n    suite_result = suite_function()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\comprehensive_test_runner.py\", line 229, in _run_group_chat_tests\n    success, unittest_result = run_group_chat_functionality_tests()\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 494, in run_group_chat_functionality_tests\n    result = runner.run(suite)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\runner.py\", line 217, in run\n    test(result)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\suite.py\", line 84, in __call__\n    return self.run(*args, **kwds)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\suite.py\", line 122, in run\n    test(result)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 678, in __call__\n    return self.run(*args, **kwds)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 623, in run\n    self._callTestMethod(testMethod)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\unittest\\case.py\", line 579, in _callTestMethod\n    if method() is not None:\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\tests\\test_group_chat_functionality.py\", line 290, in test_regression_private_chat_still_works\n    response = self.app_context.post('/webhook',\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1167, in post\n    return self.open(*args, **kw)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\testing.py\", line 235, in open\n    response = super().open(\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1116, in open\n    response_parts = self.run_wsgi_app(request.environ, buffered=buffered)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 988, in run_wsgi_app\n    rv = run_wsgi_app(self.application, environ, buffered=buffered)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\werkzeug\\test.py\", line 1264, in run_wsgi_app\n    app_rv = app(environ, start_response)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 1536, in __call__\n    return self.wsgi_app(environ, start_response)\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 1511, in wsgi_app\n    response = self.full_dispatch_request()\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 917, in full_dispatch_request\n    rv = self.dispatch_request()\n  File \"C:\\Users\\annal\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\flask\\app.py\", line 902, in dispatch_request\n    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]\n  File \"C:\\Users\\annal\\Documents\\CopilotAgents\\tbuddy_translation_TG-tool\\app.py\", line 665, in telegram_webhook\n    app.logger.info(\"Получено %d немедленных ответов от бота для чата %s.\", len(bot_responses), chat_id)\nMessage: 'Получено %d немедленных ответов от бота для чата %s.'\nArguments: (1, 54321)\n\n\n================================================================================\nOVERALL RESULT: ❌ FAIL\n================================================================================\n"
    },
    "integration_tests": null,
    "error_simulation_tests": null,
    "message_simulation_tests": null,
    "validation_results": {
      "design_compliance": {},
      "performance_compliance": {},
      "functional_compliance": {},
      "overall_compliance": false,
      "error": "'NoneType' object has no attribute 'get'"
    }
  },
  "performance_metrics": {
    "group_chat_functionality_tests": {
      "count": 1,
      "min": 34.961567401885986,
      "max": 34.961567401885986,
      "avg": 34.961567401885986,
      "total": 34.961567401885986
    },
    "validation": {
      "count": 1,
      "min": 0.0,
      "max": 0.0,
      "avg": 0.0,
      "total": 0.0
    }
  },
  "execution_info": {
    "start_time": "2025-09-06T03:34:10.249347",
    "end_time": "2025-09-06T03:34:45.223111",
    "environment": "local_testing"
  }
}